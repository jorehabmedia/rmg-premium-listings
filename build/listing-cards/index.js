(()=>{var e,t={259:(e,t,i)=>{"use strict";const s=window.wp.blocks;var n=i(556),r=i.n(n);const o=window.wp.i18n,l=window.wp.element,a=window.wp.blockEditor,c=window.wp.components,d=window.ReactJSXRuntime;function h({text:e,type:t,style:i={}}){const s=(e=>{switch(e){case"info":return{backgroundColor:"#e3f2fd",color:"#1565c0"};case"success":return{backgroundColor:"#e8f5e8",color:"#2e7d32"};case"warning":return{backgroundColor:"#fff3e0",color:"#f57c00"};case"error":return{backgroundColor:"#ffebee",color:"#c62828"};default:return{backgroundColor:"#f8f9fa",color:"#666"}}})(t);return(0,d.jsx)("div",{style:{padding:8,backgroundColor:s.backgroundColor,borderRadius:4,...i},children:(0,d.jsx)("small",{style:{color:s.color,fontSize:12},children:e})})}function u({label:e,selections:t={},onChange:i,placeholder:s="Select an option",multiSelect:n=!1}){const[r,a]=(0,l.useState)({treatmentOptions:{terms:[],loading:!0,error:null},paymentOptions:{terms:[],loading:!0,error:null},programs:{terms:[],loading:!0,error:null},levelsOfCare:{terms:[],loading:!0,error:null},clinicalServices:{terms:[],loading:!0,error:null},amenities:{terms:[],loading:!0,error:null}}),[u,p]=(0,l.useState)(!0),[g,m]=(0,l.useState)(null),f=[{key:"treatmentOptions",fieldName:"rmg.treatment.keyword",label:"Treatment Options"},{key:"paymentOptions",fieldName:"rmg.payment.keyword",label:"Payment Options"},{key:"programs",fieldName:"rmg.programs.keyword",label:"Programs"},{key:"levelsOfCare",fieldName:"rmg.levels_of_care.keyword",label:"Levels of Care"},{key:"clinicalServices",fieldName:"rmg.clinical_services.keyword",label:"Clinical Services"},{key:"amenities",fieldName:"rmg.amenities.keyword",label:"Amenities"}];(0,l.useEffect)(()=>{let e=!0;return(async()=>{try{const t={};f.forEach(e=>{const i=e.fieldName.replace(/\./g,"_").replace(/\[|\]/g,"");t[i]={terms:{field:e.fieldName,size:100,order:{_count:"desc"}}}});const i=JSON.stringify({size:0,query:{bool:{must:[{match:{post_status:"publish"}},{match:{post_type:"rehab-center"}},{match:{"rmg.status":!0}},{bool:{must:[{exists:{field:"rmg.featured_image"}},{bool:{must_not:[{term:{"rmg.featured_image.keyword":""}}]}}]}},{nested:{path:"rmg.reviews",query:{bool:{must:[{exists:{field:"rmg.reviews"}}]}}}}]}},aggs:t}),s=await fetch("/wp-json/rehab/v1/elasticsearch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query_string:"_search",payload:i})});if(!s.ok)throw new Error(`HTTP ${s.status}: ${s.statusText}`);const n=await s.json();if(e){const e={};f.forEach(t=>{const i=t.fieldName.replace(/\./g,"_").replace(/\[|\]/g,""),s=n?.aggregations?.[i]?.buckets||[];e[t.key]={terms:s.map(e=>({label:e.key,value:e.key,count:e.doc_count})),loading:!1,error:null}}),a(e),p(!1)}}catch(t){e&&(m(t.message),p(!1))}})(),()=>{e=!1}},[]);const y=()=>{const e=Object.values(t).reduce((e,t)=>e+(Array.isArray(t)?t.length:0),0);if(0===e)return s;if(1===e)for(const e of f){const i=t[e.key]||[];if(0<i.length){const t=(r[e.key]?.terms||[]).find(e=>e.value===i[0]);return t?`${e.label}: ${t.label}`:`${e.label}: ${i[0]}`}}return`${e} ${(0,o.__)("options selected","rmg-premium-listings")}`},x=(e,s,r=null)=>{const o=t[s]||[];if(n){let n;n=(null!==r?r:o.includes(e))?o.filter(t=>t!==e):[...o,e],i({...t,[s]:n})}else{const t={};f.forEach(i=>{t[i.key]=i.key===s?[e]:[]}),i(t)}};return g?(0,d.jsx)(c.BaseControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:e,children:(0,d.jsx)(h,{text:`${(0,o.__)("Error loading options:","rmg-premium-listings")} ${g}`,type:"error"})}):(0,d.jsx)(c.BaseControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:e,children:(0,d.jsx)(c.Dropdown,{popoverProps:{position:"bottom left"},renderToggle:({isOpen:e,onToggle:t})=>(0,d.jsxs)("button",{type:"button",className:"components-button dropdown-toggle-button",onClick:t,"aria-expanded":e,style:{width:248,maxWidth:"100%",justifyContent:"space-between",textAlign:"left",display:"flex",alignItems:"center",padding:"8px 12px",border:"1px solid #8c8f94",borderRadius:"4px",backgroundColor:"white"},children:[(0,d.jsx)("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},children:y()}),(0,d.jsx)("span",{className:"dashicons dashicons-arrow-down-alt2",style:{marginLeft:"8px",flexShrink:0}})]}),renderContent:({onClose:e})=>(0,d.jsx)("div",{style:{minWidth:"320px",maxHeight:"400px",overflowY:"auto"},children:u?(0,d.jsxs)("div",{style:{padding:"16px",textAlign:"center"},children:[(0,d.jsx)(c.Spinner,{}),(0,d.jsx)("p",{children:(0,o.__)("Loading options…","rmg-premium-listings")})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(h,{text:n?(0,o.__)("Multi-select mode: You can select multiple options per category for tab filtering.","rmg-premium-listings"):(0,o.__)("Single selection mode - choosing an option clears others","rmg-premium-listings"),type:"info"}),f.map(i=>{const s=r[i.key]?.terms||[],l=t[i.key]||[];return(0,d.jsxs)(c.MenuGroup,{label:i.label,children:[s.map(t=>{const s=l.includes(t.value);return n?(0,d.jsx)("div",{style:{padding:"4px 12px"},children:(0,d.jsx)(c.CheckboxControl,{__nextHasNoMarginBottom:!0,label:`${t.label} (${t.count})`,checked:s,onChange:e=>x(t.value,i.key,!e)})},t.value):(0,d.jsx)(c.MenuItem,{onClick:()=>{x(t.value,i.key),e()},isSelected:s,children:`${t.label} (${t.count})`},t.value)}),0===s.length&&(0,d.jsx)(c.MenuItem,{disabled:!0,children:(0,o.__)("No options available","rmg-premium-listings")})]},i.key)})]})})})})}function p({attributes:e,setAttributes:t,termSelections:i,onChange:s}){const{actionType:n,cardOptions:r,excludeDisplayed:l,hasBackground:p,headline:g,isInline:m,layout:f,requiresLocationData:y,slidesToShow:x}=e;return(0,d.jsxs)(a.InspectorControls,{children:[(0,d.jsxs)(c.PanelBody,{title:(0,o.__)("Layout Settings","rmg-premium-listings"),initialOpen:!0,children:[(0,d.jsx)(h,{type:"info",text:(0,o.__)("The cards visible are intended to be a preview of layout and functionality only. It is not a live preview of data or functional in most cases.","rmg-premium-listings"),style:{marginBottom:16}}),(0,d.jsx)(c.ToggleControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,o.__)("Show Headline","rmg-premium-listings"),checked:g.show,onChange:e=>t({headline:{...g,show:e}})}),(0,d.jsx)(c.SelectControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,o.__)("Layout Type","rmg-premium-listings"),value:f,options:[{label:(0,o.__)("Three Column Grid","rmg-premium-listings"),value:"three-column"},{label:(0,o.__)("Horizontal Slider","rmg-premium-listings"),value:"slider"},{label:(0,o.__)("Vertical List","rmg-premium-listings"),value:"vertical"}],onChange:e=>t({layout:e})}),(0,d.jsx)(c.ToggleControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,o.__)("Has Background","rmg-premium-listings"),checked:p,help:(0,o.__)("Add background color and padding around the block.","rmg-premium-listings"),onChange:e=>t({hasBackground:e})}),(0,d.jsx)(c.ToggleControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,o.__)("Is Inline","rmg-premium-listings"),checked:m,onChange:e=>t({isInline:e}),help:(0,o.__)('Will append an "inline" class and adjust the output differently. For used inside limited-width or fix-width containers.',"rmg-premium-listings")}),("slider"===f||"three-column"===f)&&(0,d.jsx)(c.RangeControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,o.__)("Slides to Show","rmg-premium-listings"),value:x,onChange:e=>t({slidesToShow:e}),min:1,max:4,step:.1}),(0,d.jsx)(c.ToggleControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,o.__)("Use User Location Data?","rmg-premium-listings"),checked:y,help:(0,o.__)("By default this block will output top centers. Toggle this on to attempt to fetch user location data and query targeted details.","rmg-premium-listings"),onChange:e=>t({requiresLocationData:e})}),(0,d.jsx)(c.ToggleControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,o.__)("Exclude Displayed","rmg-premium-listings"),checked:l,onChange:e=>t({excludeDisplayed:e}),help:(0,o.__)("Exclude centers from being displayed if already shown earlier on the page. If this is the first instance of the block, this will have no effect.","rmg-premium-listings")})]}),(0,d.jsxs)(c.PanelBody,{title:(0,o.__)("Filtering Options","rmg-premium-listings"),initialOpen:"none"!==n,children:[(0,d.jsx)(c.SelectControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,o.__)("Action Type","rmg-premium-listings"),value:n,options:[{label:(0,o.__)("None","rmg-premium-listings"),value:"none"},{label:(0,o.__)("Filter results by term","rmg-premium-listings"),value:"filter"},{label:(0,o.__)("Enable frontend tabbed filtering","rmg-premium-listings"),value:"tabs"}],onChange:e=>t({actionType:e}),help:(0,o.__)("Choose how results are displayed.","rmg-premium-listings")}),"filter"===n&&(0,d.jsx)("div",{style:{marginTop:"16px"},children:(0,d.jsx)(u,{label:(0,o.__)("Filter by Single Term","rmg-premium-listings"),selections:i,onChange:s,placeholder:(0,o.__)("Select a single filter…","rmg-premium-listings"),multiSelect:!1})}),"tabs"===n&&(0,d.jsx)("div",{style:{marginTop:"16px"},children:(0,d.jsx)(u,{label:(0,o.__)("Tab Terms","rmg-premium-listings"),selections:i,onChange:s,placeholder:(0,o.__)("Select terms for tabs…","rmg-premium-listings"),multiSelect:!0})})]}),(0,d.jsxs)(c.PanelBody,{title:(0,o.__)("Card Options","rmg-premium-listings"),initialOpen:!1,children:[(0,d.jsx)(c.ToggleControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,o.__)("Has Background","rmg-premium-listings"),checked:r.hasBackground,onChange:e=>t({cardOptions:{...r,hasBackground:e}})}),(0,d.jsx)(c.ToggleControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,o.__)("Show Rank","rmg-premium-listings"),checked:r.showRank,onChange:e=>t({cardOptions:{...r,showRank:e}})}),(0,d.jsx)(c.ToggleControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,o.__)("Show Address","rmg-premium-listings"),checked:r.showAddress,onChange:e=>t({cardOptions:{...r,showAddress:e}})}),(0,d.jsx)(c.ToggleControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,o.__)("Show Insurance","rmg-premium-listings"),checked:r.showInsurance,onChange:e=>t({cardOptions:{...r,showInsurance:e}})})]})]})}h.propTypes={text:r().string.isRequired,type:r().string.isRequired,style:r().object},u.propTypes={label:r().string.isRequired,selections:r().object.isRequired,onChange:r().func.isRequired,placeholder:r().string,multiSelect:r().bool},p.propTypes={attributes:r().object.isRequired,setAttributes:r().func.isRequired,termSelections:r().shape({selectedAmenities:r().array,selectedClinicalServices:r().array,selectedLevelsOfCare:r().array,selectedPaymentOptions:r().array,selectedPrograms:r().array,selectedTabTerms:r().array,selectedTreatmentOptions:r().array}).isRequired,onChange:r().func.isRequired};const g=(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2,transform:"translate(0 -.5)"},viewBox:"0 0 16 28",children:(0,d.jsx)("path",{d:"m.711 24.209 9.427-9.721L.711 4.766a2.55 2.55 0 0 1 0-3.533 2.37 2.37 0 0 1 3.426 0l11.152 11.501a2.55 2.55 0 0 1 0 3.532L4.137 27.767a2.37 2.37 0 0 1-3.426 0c-.924-.977-.948-2.581 0-3.558"})}),m=(0,d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"21",fill:"none",viewBox:"0 0 20 21",children:[(0,d.jsxs)("g",{fill:"#3f8010",clipPath:"url(#shield-clip)",children:[(0,d.jsx)("path",{d:"M15.484 2.283 10.263.543a.83.83 0 0 0-.527 0l-5.22 1.74a4.16 4.16 0 0 0-2.85 3.953V10.5c0 6.302 7.667 9.783 7.995 9.928a.83.83 0 0 0 .677 0c.328-.145 7.995-3.626 7.995-9.928V6.236a4.16 4.16 0 0 0-2.85-3.953m1.182 8.217c0 4.546-5.266 7.528-6.667 8.24-1.402-.71-6.666-3.682-6.666-8.24V6.236a2.5 2.5 0 0 1 1.71-2.372l4.956-1.652 4.957 1.652a2.5 2.5 0 0 1 1.71 2.372z"}),(0,d.jsx)("path",{d:"m12.75 7.417-3.49 3.5-1.87-1.95a.833.833 0 1 0-1.201 1.155l1.922 2a1.56 1.56 0 0 0 1.12.5h.028a1.56 1.56 0 0 0 1.112-.461l3.56-3.56a.835.835 0 0 0-.59-1.429.84.84 0 0 0-.591.245"})]}),(0,d.jsx)("defs",{children:(0,d.jsx)("clipPath",{id:"shield-clip",children:(0,d.jsx)("path",{fill:"#fff",d:"M0 .5h20v20H0z"})})})]}),f=(0,d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},viewBox:"0 0 18 20",children:[(0,d.jsx)("path",{d:"M17.75.25v11.083a1.75 1.75 0 0 1-.986 1.574l-7.09 3.44a1.75 1.75 0 0 1-1.542-.007l-6.909-3.427a1.75 1.75 0 0 1-.973-1.567V.25z",style:{fill:"#fff",fillRule:"nonzero"},transform:"translate(0 2.955)"}),(0,d.jsx)("path",{d:"M0 .006V0a3 3 0 0 1 3-2.994h12A3 3 0 0 1 18 0v11.333a2 2 0 0 1-1.127 1.799l-7.09 3.44a2 2 0 0 1-1.762-.008l-6.909-3.427A2 2 0 0 1 0 11.346zM17.5.5H.5v10.846a1.5 1.5 0 0 0 .834 1.343l6.909 3.427c.416.206.904.208 1.322.006l7.09-3.44c.517-.251.845-.774.845-1.349z",transform:"translate(0 2.994)"})]}),y=e=>{const{hasBackground:t,showRank:i,showAddress:s,showInsurance:n}=e.cardOptions||{};return(0,d.jsxs)("div",{className:"listing-card "+(t?"has-background":""),children:[(0,d.jsx)("div",{className:"card-image",children:(0,d.jsx)("span",{className:"ad-badge",children:"Ad"})}),(0,d.jsxs)("div",{className:"card-content",children:[(0,d.jsx)("h3",{className:"card-title",children:(0,d.jsx)("a",{href:"#",children:e.title})}),(0,d.jsxs)("div",{className:"card-main",children:[e.award&&(0,d.jsx)("div",{className:"awards",children:(0,d.jsxs)("div",{className:"award",children:[(0,d.jsxs)("div",{className:"award-badge",children:[(0,d.jsx)("span",{children:e.award}),f]}),(0,d.jsx)("div",{className:"award-description",children:e.award_description})]})}),s&&!e.award&&(0,d.jsxs)("div",{className:"card-location",children:[e.city,", ",e.state," ",e.zip&&(0,d.jsx)("span",{className:"zip-code",children:e.zip})]})]}),(0,d.jsxs)("div",{className:"card-footer",children:[i&&(0,d.jsxs)("div",{className:"card-rating",children:[(0,d.jsx)("span",{className:"rating-score",children:e.rating}),(0,d.jsxs)("span",{className:"rating-reviews",children:["(",e.reviews,")"]})]}),e.acceptsInsurance&&n&&(0,d.jsxs)("div",{className:"insurance-badge",children:[m,(0,o.__)("Accepts Insurance","rmg-premium-listings")]})]})]})]},e.id)};y.propTypes={card:r().object.isRequired};const x=({termSelections:e,actionType:t})=>{const i=Object.values(e).flat();return 0<i.length&&"tabs"===t?(0,d.jsx)("div",{className:"listing-tabs",children:(0,d.jsx)("div",{className:"tab-buttons btn-group",role:"tablist",children:i.map((e,t)=>{const i=0===t;return(0,d.jsx)("button",{disabled:!0,className:"tab-button btn-primary-large "+(i?"active":"inactive"),role:"tab","data-tab":e,"aria-selected":"false",children:e},e)})})}):null};x.propTypes={termSelections:r().object.isRequired,actionType:r().string.isRequired};const S=({layout:e,mockCards:t,cardOptions:i})=>"vertical"===e?(0,d.jsx)("div",{className:"cards-grid layout-vertical",children:t.map(y)}):"slider"===e?(0,d.jsxs)("div",{className:"cards-grid layout-slider",children:[(0,d.jsx)("div",{className:"slider-container",children:t.map(y)}),(0,d.jsxs)("div",{className:"slider-controls",children:[(0,d.jsx)("button",{className:"slider-prev btn-gray-line",type:"button","aria-label":"Previous slide",children:g}),(0,d.jsx)("button",{className:"slider-next btn-gray-line",type:"button","aria-label":"Next slide",children:g})]})]}):(0,d.jsx)("div",{className:"cards-grid layout-three-column",children:(0,d.jsx)("div",{className:"slider-container",children:t.map(y)})});S.propTypes={layout:r().string.isRequired,mockCards:r().array.isRequired,cardOptions:r().object.isRequired};class v{constructor(e,t={}){e?(this.track=e,this.container=this.findContainer(e),this.options=this.buildConfig(t),this.slides=Array.from(this.track.children),0!==this.slides.length?(this.prevBtn=this.findNavButton(this.options.prevElement),this.nextBtn=this.findNavButton(this.options.nextElement),this.currentSlide=0,this.totalSlides=this.slides.length,this.autoplayInterval=null,this.slidePositions=[],this.isScrolling=!1,this.scrollTimeout=null,this.init()):console.error("NativeScrollSlider: no slides found in track",this.track)):console.error("NativeScrollSlider: trackElement is null or undefined")}findContainer(e){let t=e;for(;t&&t!==document.body;){if(t.dataset.sliderConfig)return t;t=t.parentElement}return e.parentElement||e}buildConfig(e){let t={};if(this.container&&this.container.dataset.sliderConfig)try{t=JSON.parse(this.container.dataset.sliderConfig)}catch(e){console.warn("NativeScrollSlider: Invalid JSON in data-slider-config",e)}return Object.assign({},{slidesToShow:4,slidesToScroll:1,infinite:!1,bounceBack:!1,centerMode:!1,autoplay:!1,autoplaySpeed:3e3,gap:24,startSlide:0,responsive:[{breakpoint:1200,settings:{slidesToShow:3}},{breakpoint:992,settings:{slidesToShow:2}},{breakpoint:768,settings:{slidesToShow:1}},{breakpoint:576,settings:{slidesToShow:1}}],prevElement:".prev, .slider-prev, .slider-grid-prev",nextElement:".next, .slider-next, .slider-grid-next",minSlideWidth:0,showOverflow:!1,overflowAmount:.5,containerMaxWidth:1200,basePadding:35},t,e)}findNavButton(e){if(!e)return null;let t=this.container.querySelector(e);if(t||(t=this.track.querySelector(e)),!t&&this.container.parentElement){const i=this.container.parentElement.querySelector(".slider-controls");i&&(e.includes("prev")?t=i.querySelector(".slider-prev"):e.includes("next")&&(t=i.querySelector(".slider-next")))}return t}init(){this.setupResponsive(),this.setupTrackStyles(),this.setupSlides(),this.calculateSlidePositions(),this.setupNavigation(),this.setupScrollListener(),this.setupAutoplay();const e=this;window.addEventListener("resize",()=>{e.handleResize()}),this.container.classList.add("slider-ready"),setTimeout(()=>{e.goToSlide(e.currentOptions.startSlide)},50),this.updateCurrentSlideFromScroll()}setupTrackStyles(){if(this.track.style.display="flex",this.track.style.overflowX="auto",this.track.style.scrollBehavior="smooth",this.track.style.scrollbarWidth="none",this.track.style.msOverflowStyle="none",this.currentOptions.showOverflow?this.setupPullToRightStyles():this.resetPullToRightStyles(),!document.getElementById("native-scroll-slider-styles")){const e=document.createElement("style");e.id="native-scroll-slider-styles",e.textContent="\n\t\t\t\t\t\t  .slider-ready .slider-track::-webkit-scrollbar,\n\t\t\t\t\t\t  [data-slider-config] > *::-webkit-scrollbar {\n\t\t\t\t\t\t\t  display: none;\n\t\t\t\t\t\t  }\n\t\t\t\t\t  ",document.head.appendChild(e)}}setupPullToRightStyles(){this.container.style.width="100vw",this.container.style.position="relative",this.container.style.left="50%",this.container.style.right="50%",this.container.style.marginLeft="-50vw",this.container.style.marginRight="-50vw",this.updatePullToRightPadding()}resetPullToRightStyles(){this.container.style.width="",this.container.style.position="",this.container.style.left="",this.container.style.right="",this.container.style.marginLeft="",this.container.style.marginRight="",this.track.style.paddingLeft="",this.track.style.paddingRight="",this.pullToRightLeftPadding=0}updatePullToRightPadding(){if(!this.currentOptions.showOverflow)return;const e=window.innerWidth,t=this.currentOptions.containerMaxWidth,i=this.currentOptions.basePadding;let s;s=e<=t+2*i?i:Math.max(i,(e-t)/2+i),this.track.style.paddingLeft=s+"px",this.track.style.paddingRight=i+"px",this.pullToRightLeftPadding=s}setupResponsive(){const e=window.innerWidth;let t=Object.assign({},this.options);const i=[...this.options.responsive].sort((e,t)=>t.breakpoint-e.breakpoint);for(let s=0;s<i.length;s++){const n=i[s];e<=n.breakpoint&&(t=Object.assign(t,n.settings))}this.currentOptions=t}setupSlides(){if(!this.track)return void console.error("setupSlides: track is null");if(this.track.style.gap=this.currentOptions.gap+"px",!this.container)return void console.error("setupSlides: container is null");let e,t,i,s,n,r=this.container.offsetWidth;if(this.currentOptions.showOverflow){this.updatePullToRightPadding(),r=window.innerWidth;const n=r-this.pullToRightLeftPadding-this.currentOptions.basePadding;t=(this.currentOptions.slidesToShow-1)*this.currentOptions.gap,s=0,this.currentOptions.overflowAmount>0&&(s=(n-t-this.currentOptions.gap)/(this.currentOptions.slidesToShow+this.currentOptions.overflowAmount)*this.currentOptions.overflowAmount);let o=(n-t-s)/this.currentOptions.slidesToShow;const l=this.parseMinSlideWidth();i=l>0&&o<l?l:o,e=0}else{t=(this.currentOptions.slidesToShow-1)*this.currentOptions.gap;let s=(r-t)/this.currentOptions.slidesToShow;const o=this.parseMinSlideWidth();o>0&&s<o?(i=o,n=i*this.currentOptions.slidesToShow+t,this.currentOptions.centerMode,e=Math.max(0,(r-n)/2)):(i=s,n=i*this.currentOptions.slidesToShow+t,e=Math.max(0,(r-n)/2)),this.track.style.paddingLeft=e+"px",this.track.style.paddingRight=e+"px"}for(let e=0;e<this.slides.length;e++)this.slides[e]&&this.slides[e].style&&(this.slides[e].style.width=i+"px",this.slides[e].style.flexShrink="0");(this.currentOptions.infinite||this.currentOptions.bounceBack)&&this.totalSlides>this.currentOptions.slidesToShow&&(this.currentOptions.infinite?this.setupTrueInfinite():this.currentOptions.bounceBack&&this.setupBounceBack())}parseMinSlideWidth(){if(!this.currentOptions.minSlideWidth)return 0;const e=this.currentOptions.minSlideWidth;if("string"==typeof e){const t=parseFloat(e);return isNaN(t)?0:t}return"number"==typeof e?e:0}setupClonedSlides(e){const t="infinite"===e?this.currentOptions.slidesToShow+1:Math.max(this.currentOptions.slidesToShow,2);if("infinite"===e){for(let e=0;e<t;e++){const t=e%this.totalSlides,i=this.slides[t].cloneNode(!0);i.classList.add("cloned","infinite-clone"),i.dataset.originalIndex=t,this.track.appendChild(i)}for(let e=0;e<t;e++){const i=(this.totalSlides-t+e)%this.totalSlides,s=this.slides[i].cloneNode(!0);s.classList.add("cloned","infinite-clone"),s.dataset.originalIndex=i,this.track.insertBefore(s,this.track.firstChild)}this.initialCloneCount=t}else{for(let e=0;e<t;e++){const t=this.slides[e].cloneNode(!0);t.classList.add("cloned","bounce-clone"),this.track.appendChild(t)}for(let e=this.totalSlides-t;e<this.totalSlides;e++){const t=this.slides[e].cloneNode(!0);t.classList.add("cloned","bounce-clone"),this.track.insertBefore(t,this.track.firstChild)}}this.allSlides=Array.from(this.track.children);const i=this;setTimeout(()=>{i.calculateSlidePositions();const e=t+i.currentOptions.startSlide;let s=i.slidePositions[e];if(i.currentOptions.centerMode){const e=window.getComputedStyle(i.track),t=parseFloat(e.paddingLeft)||0,n=parseFloat(e.paddingRight)||0;s=s-(i.track.offsetWidth-t-n)/2+i.slides[0].offsetWidth/2}i.track.scrollLeft=s,i.currentSlide=i.currentOptions.startSlide},10)}setupBounceBack(){this.setupClonedSlides("bounce")}setupTrueInfinite(){const e=this.container.offsetWidth,t=this.slides[0].offsetWidth+this.currentOptions.gap,i=Math.ceil(e/t),s=Math.max(this.totalSlides,2*i);this.initialCloneCount=s;for(let e=0;e<s;e++){const t=e%this.totalSlides,i=this.slides[t].cloneNode(!0);i.classList.add("cloned","infinite-clone"),i.dataset.originalIndex=t,this.track.appendChild(i)}for(let e=0;e<s;e++){const t=(this.totalSlides-1-e%this.totalSlides)%this.totalSlides,i=this.slides[t].cloneNode(!0);i.classList.add("cloned","infinite-clone"),i.dataset.originalIndex=t,this.track.insertBefore(i,this.track.firstChild)}this.allSlides=Array.from(this.track.children);const n=this;setTimeout(()=>{n.calculateSlidePositions();const e=s+n.currentOptions.startSlide;let t=n.slidePositions[e];if(n.currentOptions.centerMode){const e=window.getComputedStyle(n.track),i=parseFloat(e.paddingLeft)||0,s=parseFloat(e.paddingRight)||0;t=t-(n.track.offsetWidth-i-s)/2+n.slides[0].offsetWidth/2}n.track.style.scrollBehavior="auto",n.track.scrollLeft=t,n.track.style.scrollBehavior="smooth",n.currentSlide=n.currentOptions.startSlide,n.infiniteScrollSetup=!0},10)}calculateSlidePositions(){this.slidePositions=[];const e=this.allSlides||this.slides,t=parseFloat(this.track.style.paddingLeft)||0;for(let i=0;i<e.length;i++)this.slidePositions.push(e[i].offsetLeft-t)}setupScrollListener(){const e=this;this.track.addEventListener("scroll",()=>{e.isScrolling=!0,e.pauseAutoplay(),e.currentOptions.infinite&&(clearTimeout(e.infiniteScrollTimeout),e.infiniteScrollTimeout=setTimeout(()=>{e.handleInfiniteScroll()},50)),clearTimeout(e.scrollTimeout),e.scrollTimeout=setTimeout(()=>{e.isScrolling=!1,e.resumeAutoplay()},150),e.updateCurrentSlideFromScroll()},{passive:!0})}updateCurrentSlideFromScroll(){const e=this.track.scrollLeft;if(this.currentOptions.infinite)return void this.updateCenterMode();let t=e;if(this.currentOptions.centerMode){const i=window.getComputedStyle(this.container),s=parseFloat(i.paddingLeft)||0,n=parseFloat(i.paddingRight)||0;t=e+(this.container.offsetWidth-s-n)/2+s}let i=0,s=1/0;for(let e=0;e<this.slidePositions.length;e++){const n=this.slidePositions[e];let r=n;this.currentOptions.centerMode&&(r=n+this.slides[0].offsetWidth/2);const o=Math.abs(t-r);o<s&&(s=o,i=e)}if(this.currentOptions.bounceBack&&this.allSlides){const e=Math.max(this.currentOptions.slidesToShow,2);i>=e&&i<e+this.totalSlides&&(this.currentSlide=i-e)}else this.currentSlide=i;this.updateNavigation(),this.updateCenterMode()}handleScrollEnd(){this.currentOptions.bounceBack?this.handleBounceBackScroll():this.currentOptions.infinite&&this.handleInfiniteScroll()}handleBounceBackScroll(){const e=Math.max(this.currentOptions.slidesToShow,2),t=this.track.scrollLeft,i=this.slides[0].offsetWidth+this.currentOptions.gap;if(t<e*i/2){const s=e+this.totalSlides-(e-Math.floor(t/i));this.track.scrollLeft=this.slidePositions[s]}else if(t>this.slidePositions[e+this.totalSlides-1]){const t=e+this.currentSlide%this.totalSlides;this.track.scrollLeft=this.slidePositions[t]}}handleInfiniteScroll(){if(!this.infiniteScrollSetup)return;const e=this.track.scrollLeft,t=this.slides[0].offsetWidth+this.currentOptions.gap,i=this.totalSlides*t,s=2*t,n=this.slidePositions[this.initialCloneCount+this.totalSlides]-2*t;if(e<=s){const t=e+i;this.seamlessJump(t)}else if(e>=n){const t=e-i;this.seamlessJump(t)}}setupNavigation(){const e=this;this.prevBtn&&this.prevBtn.addEventListener("click",()=>{e.prev()}),this.nextBtn&&this.nextBtn.addEventListener("click",()=>{e.next()}),this.updateNavigation()}goToSlide(e){if(this.currentOptions.infinite||e<0||e>=this.totalSlides)return;let t;if(this.currentOptions.bounceBack){const i=Math.max(this.currentOptions.slidesToShow,2);t=this.slidePositions[i+e]}else t=this.slidePositions[e];if(this.currentOptions.centerMode){const e=window.getComputedStyle(this.container),i=parseFloat(e.paddingLeft)||0,s=parseFloat(e.paddingRight)||0;t=t-(this.container.offsetWidth-i-s)/2+this.slides[0].offsetWidth/2,t-=i}this.track.scrollTo({left:t,behavior:"smooth"}),this.currentSlide=e}seamlessJump(e){const t=this.track.style.scrollBehavior;this.track.style.scrollBehavior="auto",this.track.scrollLeft=e,setTimeout(()=>{this.track.style.scrollBehavior=t||"smooth"},10)}getActualSlidesToShow(){if(!this.slides.length)return this.currentOptions.slidesToShow;const e=this.container.offsetWidth,t=this.slides[0].offsetWidth,i=this.currentOptions.gap,s=Math.floor((e+i)/(t+i));return Math.min(s,this.currentOptions.slidesToShow)}next(){if(this.currentOptions.infinite){const e=(this.slides[0].offsetWidth+this.currentOptions.gap)*this.currentOptions.slidesToScroll;if(this.currentOptions.centerMode){const e=this.findCurrentCenterSlideIndex()+this.currentOptions.slidesToScroll;this.goToCenterSlide(e)}else this.track.scrollTo({left:this.track.scrollLeft+e,behavior:"smooth"});return}const e=this.getActualSlidesToShow();let t;t=this.currentOptions.bounceBack?(this.currentSlide+this.currentOptions.slidesToScroll)%this.totalSlides:Math.min(this.currentSlide+this.currentOptions.slidesToScroll,this.totalSlides-e),this.goToSlide(t)}prev(){if(this.currentOptions.infinite){const e=(this.slides[0].offsetWidth+this.currentOptions.gap)*this.currentOptions.slidesToScroll;if(this.currentOptions.centerMode){const e=this.findCurrentCenterSlideIndex()-this.currentOptions.slidesToScroll;this.goToCenterSlide(e)}else this.track.scrollTo({left:this.track.scrollLeft-e,behavior:"smooth"});return}let e;this.currentOptions.bounceBack?(e=this.currentSlide-this.currentOptions.slidesToScroll,e<0&&(e=this.totalSlides+e)):e=Math.max(this.currentSlide-this.currentOptions.slidesToScroll,0),this.goToSlide(e)}findCurrentCenterSlideIndex(){const e=this.track.scrollLeft,t=window.getComputedStyle(this.track),i=parseFloat(t.paddingLeft)||0,s=e+(this.track.offsetWidth-i-(parseFloat(t.paddingRight)||0))/2;let n=0,r=1/0;const o=this.allSlides||this.slides;for(let e=0;e<o.length;e++){const t=o[e],l=t.offsetLeft+t.offsetWidth/2-i,a=Math.abs(s-l);a<r&&(r=a,n=e)}return n}goToCenterSlide(e){const t=this.allSlides||this.slides;if(e<0||e>=t.length)return;const i=t[e],s=window.getComputedStyle(this.track),n=parseFloat(s.paddingLeft)||0,r=parseFloat(s.paddingRight)||0,o=this.track.offsetWidth-n-r,l=i.offsetLeft-n-o/2+i.offsetWidth/2;this.track.scrollTo({left:l,behavior:"smooth"})}updateNavigation(){if(this.prevBtn&&this.nextBtn){if(this.currentOptions.infinite)return this.prevBtn.disabled=!1,void(this.nextBtn.disabled=!1);if(this.currentOptions.bounceBack)this.prevBtn.disabled=!1,this.nextBtn.disabled=!1;else{this.prevBtn.disabled=0===this.currentSlide;const e=this.track.scrollWidth-this.track.clientWidth,t=this.track.scrollLeft;this.nextBtn.disabled=t>=e-5}}}updateCenterMode(){if(!this.currentOptions.centerMode)return;const e=this.allSlides||this.slides;for(let t=0;t<e.length;t++)e[t].classList.remove("center");let t;if(this.currentOptions.bounceBack)t=Math.max(this.currentOptions.slidesToShow,2)+this.currentSlide;else{if(this.currentOptions.infinite){const t=this.track.scrollLeft+this.container.offsetWidth/2;let i=null,s=1/0;for(let n=0;n<e.length;n++){const r=e[n],o=r.offsetLeft+r.offsetWidth/2,l=Math.abs(t-o);l<s&&(s=l,i=r)}return void(i&&i.classList.add("center"))}t=this.currentSlide}e[t]&&e[t].classList.add("center")}setupAutoplay(){if(this.currentOptions.autoplay){this.startAutoplay();const e=this;this.container.addEventListener("mouseenter",()=>{e.pauseAutoplay()}),this.container.addEventListener("mouseleave",()=>{e.resumeAutoplay()})}}startAutoplay(){if(!this.currentOptions.autoplay)return;this.stopAutoplay();const e=this;this.autoplayInterval=setInterval(()=>{if(!e.isScrolling)if(e.currentOptions.infinite){const t=(e.slides[0].offsetWidth+e.currentOptions.gap)*e.currentOptions.slidesToScroll;if(e.currentOptions.centerMode){const t=e.findCurrentCenterSlideIndex()+e.currentOptions.slidesToScroll;e.goToCenterSlide(t)}else e.track.scrollTo({left:e.track.scrollLeft+t,behavior:"smooth"})}else e.next()},this.currentOptions.autoplaySpeed)}stopAutoplay(){this.autoplayInterval&&(clearInterval(this.autoplayInterval),this.autoplayInterval=null)}pauseAutoplay(){this.autoplayPaused=!0,this.stopAutoplay()}resumeAutoplay(){if(this.currentOptions.autoplay&&this.autoplayPaused){this.autoplayPaused=!1;const e=this;setTimeout(()=>{!e.autoplayPaused&&!e.isScrolling&&e.startAutoplay()},1e3)}}handleResize(){const e=this;setTimeout(()=>{const t=e.currentOptions.slidesToShow,i=e.currentOptions.showOverflow;if(e.setupResponsive(),e.currentOptions.showOverflow!==i?e.setupTrackStyles():e.currentOptions.showOverflow&&e.updatePullToRightPadding(),e.setupSlides(),e.calculateSlidePositions(),e.currentOptions.slidesToShow!==t){const t=e.currentOptions.startSlide||0;e.goToSlide(t)}else e.goToSlide(e.currentSlide)},100)}destroy(){this.stopAutoplay(),clearTimeout(this.scrollTimeout),clearTimeout(this.infiniteScrollTimeout),this.track&&this.track.querySelectorAll(".infinite-clone").forEach(e=>e.remove())}}function b({attributes:e,setAttributes:t}){const{actionType:i="none",cardOptions:s={hasBackground:!0,showRank:!0,showAddress:!0,showInsurance:!0},hasBackground:n=!1,headline:r={text:"Featured Facilities Near You",alignment:"left",show:!0},layout:h="three-column",selectedTerms:u={amenities:[],clinicalServices:[],levelsOfCare:[],paymentOptions:[],programs:[],treatmentOptions:[],tabTerms:[]},slidesToShow:g=3}=e,m=(0,l.useRef)(null),f=(0,l.useRef)(null),y=(0,l.useMemo)(()=>{const e={acceptsInsurance:!0,award_description:"Top 10 Rehab in TX",award:"1",city:"Boynton Beach",rating:"4.7",reviews:"294 Reviews",state:"FL",title:"United Recovery Project – Luxury Rehab in Florida",zip:"33021"},t="slider"===h?8:3,i=Math.floor(Math.random()*t);return Array(t).fill(null).map((t,n)=>({...e,id:n+1,showAwards:n===i,award:n===i?e.award:"",award_description:n===i?e.award_description:"",cardOptions:s}))},[h,s]),b=(0,a.useBlockProps)({className:`premium-listings-cards layout-${h} ${n?"has-background":""}`,..."slider"===h&&{ref:m},style:{"--slides-to-show":g}});return(0,l.useEffect)(()=>{if("slider"===h&&m.current){const e=m.current.querySelector(".slider-container");if(e&&!f.current)try{f.current=new v(e)}catch(e){console.error("Error creating slider:",e)}}return()=>{f.current&&"function"==typeof f.current.destroy&&(f.current.destroy(),f.current=null)}},[h]),(0,l.useEffect)(()=>()=>{f.current&&"function"==typeof f.current.destroy&&f.current.destroy()},[]),(0,d.jsxs)(d.Fragment,{children:[r.show&&(0,d.jsx)(a.BlockControls,{children:(0,d.jsxs)(c.ToolbarGroup,{children:[(0,d.jsx)(a.AlignmentToolbar,{value:r.alignment,onChange:e=>t({headline:{...r,alignment:e}})}),(0,d.jsx)(a.BlockControls,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,group:"block",children:(0,d.jsx)(a.HeadingLevelDropdown,{options:[2,3],value:r.tag,onChange:e=>t({headline:{...r,tag:e}})})})]})}),(0,d.jsx)(p,{attributes:e,setAttributes:t,termSelections:u,onChange:e=>{t({selectedTerms:{...u,...e}})}}),(0,d.jsxs)("div",{...b,children:[r.show&&(0,d.jsx)(a.RichText,{tagName:`h${r.tag}`,className:"listing-headline",value:r.text,onChange:e=>t({headline:{...r,text:e}}),placeholder:(0,o.__)("Enter headline…","rmg-premium-listings"),style:{textAlign:r.alignment,marginTop:0},allowedFormats:[]}),(0,d.jsx)(x,{termSelections:u,actionType:i}),(0,d.jsx)(S,{layout:h,mockCards:y})]})]})}typeof window<"u"&&(window.NativeScrollSlider=v),b.propTypes={attributes:r().object.isRequired,setAttributes:r().func.isRequired};const w=JSON.parse('{"UU":"rmg-premium-listings/cards"}'),k=window.wp.primitives,_=(0,d.jsx)(k.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)(k.Path,{d:"M18 8H6c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-4c0-1.1-.9-2-2-2zm.5 6c0 .3-.2.5-.5.5H6c-.3 0-.5-.2-.5-.5v-4c0-.3.2-.5.5-.5h12c.3 0 .5.2.5.5v4zM4 4v1.5h16V4H4zm0 16h16v-1.5H4V20z"})});(0,s.registerBlockType)(w.UU,{icon:_,edit:b})},556:(e,t,i)=>{e.exports=i(694)()},694:(e,t,i)=>{"use strict";var s=i(925);function n(){}function r(){}r.resetWarningCache=n,e.exports=function(){function e(e,t,i,n,r,o){if(o!==s){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:n};return i.PropTypes=i,i}},925:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},i={};function s(e){var n=i[e];if(void 0!==n)return n.exports;var r=i[e]={exports:{}};return t[e](r,r.exports,s),r.exports}s.m=t,e=[],s.O=(t,i,n,r)=>{if(!i){var o=1/0;for(d=0;d<e.length;d++){for(var[i,n,r]=e[d],l=!0,a=0;a<i.length;a++)(!1&r||o>=r)&&Object.keys(s.O).every(e=>s.O[e](i[a]))?i.splice(a--,1):(l=!1,r<o&&(o=r));if(l){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[i,n,r]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={342:0,898:0};s.O.j=t=>0===e[t];var t=(t,i)=>{var n,r,[o,l,a]=i,c=0;if(o.some(t=>0!==e[t])){for(n in l)s.o(l,n)&&(s.m[n]=l[n]);if(a)var d=a(s)}for(t&&t(i);c<o.length;c++)r=o[c],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(d)},i=globalThis.webpackChunkrmg_premium_listings=globalThis.webpackChunkrmg_premium_listings||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var n=s.O(void 0,[898],()=>s(259));n=s.O(n)})();